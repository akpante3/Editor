<!doctype html>
<html>
    <head>
        <title>Frontend Playground</title>
        <link rel="stylesheet" type="text/css" href="packages/codemirror-5.51.0/lib/codemirror.css">
        <link rel="stylesheet" type="text/css" href="packages/codemirror-5.51.0/theme/darcula.css">
        <link rel="stylesheet" type="text/css" href="/style.css">
        <script type="text/javascript" src="packages/codemirror-5.51.0/lib/codemirror.js"></script>
        <script src="packages/codemirror-5.51.0/mode/javascript/javascript.js"></script>
        <script type="text/javascript" src="https://cdn.rawgit.com/codemirror/CodeMirror/master/mode/xml/xml.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.rawgit.com/carlo/jquery-base64/master/jquery.base64.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="https://unpkg.com/jquery.terminal/js/jquery.terminal.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/jquery.terminal/css/jquery.terminal.min.css"/>
        <script src="SplitterBar.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="side-bar">
               <div class="side-bar-item"><svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17.908 20.614"><defs class="icon-svg"></defs><g><path d="M10.4.937H.9v18.74H17.094V7.608ZM15.6,18.1H2.422V2.51H9.554V8.124H15.6Z"></path></g></svg></div>
               <div class="side-bar-item"><svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.966 15.771"><defs class="icon-svg"></defs><g><path d="M18.814,9.336a2.808,2.808,0,0,0-3.17,1.377H13.873L10.945,7.784l2.928-2.87H15.69a2.82,2.82,0,1,0,0-2.755h-2.6l-4,4.141H6.227a2.823,2.823,0,0,0-3.113-1.18A2.787,2.787,0,0,0,1.149,7.085,2.821,2.821,0,0,0,6.194,9.437H9.157l4,4h2.5a2.816,2.816,0,1,0,3.164-4.1Zm-.768-7.013a1.214,1.214,0,1,1-1.214,1.214A1.214,1.214,0,0,1,18.046,2.323ZM3.817,9.056A1.214,1.214,0,1,1,5.031,7.842,1.214,1.214,0,0,1,3.817,9.056Zm14.194,4.225a1.214,1.214,0,1,1,1.214-1.214A1.214,1.214,0,0,1,18.011,13.281Z"></path></g></svg></div>
               <div class="side-bar-item"><svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16.54"><defs class="icon-svg"></defs><g><path d="M1.6,5.093a.4.4,0,0,0-.616.385v6.451a1.247,1.247,0,0,0,.608,1l4.863,2.538a.382.382,0,0,0,.608-.369V8.447a1.2,1.2,0,0,0-.616-.987Z"></path><path d="M14.523,5.093a.4.4,0,0,1,.616.385v6.451a1.247,1.247,0,0,1-.608,1L9.669,15.471a.382.382,0,0,1-.608-.369V8.447a1.2,1.2,0,0,1,.616-.987Z"></path><path d="M7.413,1.041A1.776,1.776,0,0,1,8.7,1.047l4.491,2.067c.353.163.35.422-.007.576L8.707,5.629a1.9,1.9,0,0,1-1.3.006L2.793,3.685c-.358-.151-.361-.405-.006-.565Z"></path></g></svg></div>
               <div class="side-bar-item"><svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.969 21.519"><defs class="icon-svg"></defs><g><path d="M18.989,12.813a2.435,2.435,0,0,1-1.257-2.593,1.139,1.139,0,0,1,.45-.891c.5-.356.97-.748,1.44-1.14a2.937,2.937,0,0,0,.359-.436c-.1-.208-.173-.371-.261-.524-.422-.738-.838-1.479-1.276-2.207-.788-1.31-.493-1.316-1.958-.639a2.332,2.332,0,0,1-2.759-.148c-.344-.279-.615-.464-.63-.954a14.7,14.7,0,0,0-.226-1.7.663.663,0,0,0-.757-.648C11.108.957,10.1.943,9.09.943c-.932,0-1,.042-1.082.984C7.9,3.148,7.735,4.328,6.3,4.721a1.448,1.448,0,0,1-.76.071,19.85,19.85,0,0,1-1.873-.74.558.558,0,0,0-.824.289C2.4,5.135,1.927,5.913,1.477,6.7c-.659,1.155-.7,1.227.434,1.966a2.41,2.41,0,0,1,1.253,2.595,1.142,1.142,0,0,1-.456.888c-.513.369-.99.786-1.492,1.172a.506.506,0,0,0-.137.764q.907,1.53,1.78,3.08a.536.536,0,0,0,.783.265q.926-.4,1.871-.748a.82.82,0,0,1,.558-.057,14.7,14.7,0,0,1,1.483.863.63.63,0,0,1,.2.4c.1.622.191,1.247.249,1.873a.738.738,0,0,0,.883.777c.968-.032,1.938-.008,2.907-.009.939,0,1-.045,1.091-.976.115-1.215.252-2.409,1.7-2.8a1.478,1.478,0,0,1,.759-.078,15.994,15.994,0,0,1,1.818.718.6.6,0,0,0,.915-.307c.426-.78.9-1.532,1.327-2.314C20.066,13.571,20.388,13.756,18.989,12.813Zm-5.018-1.841a3.476,3.476,0,0,1-4.144,3.265A3.631,3.631,0,0,1,6.89,10.561,3.533,3.533,0,0,1,10.708,7.22,3.458,3.458,0,0,1,13.971,10.972Z"></path></g></svg></div>
            </div>
            <div class="splitter-container">
                <div class="left">
                    <div class="splitter-container2">
                        <div class="left"></div>
                        <div class="right middle">
                            <textarea id="editor"></textarea>
                        </div>
                    </div>
                </div>
                <div class="right">
                    <div class="console">

                    </div>
                </div>
            </div>
        </div>
        <button onclick="submit_html()">click</button> 
    </body>
    <script>

        $('.splitter-container').SplitterBar();
        $('.splitter-container2').SplitterBar();
        var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
            value: "function myScript(){return 100;}\n",
            mode:  "javascript",
            lineWrapping: true,
            lineNumbers: true,
            autocorrect: true,
        });

        const term = $('.console').terminal({
            hello: function(what) {
                this.echo('Hello, ' + what +
                '. Wellcome to this terminal.');
            }
        }, {
            greetings: 'My First Terminal'
        });

        term.echo('foo');


        function submit_html() {

            editor.save();
            var code = editor.getDoc().getValue("\n");
            const payload = {
                code,
            }
            try {
                const res = axios.post('/api/v1/code', { 
                    code: payload.code 
                }).then((res) => {
                    if (res) {
                        term.echo(res.data.data)
                    }
                });
            } catch(err) {
              console.log(err, 'this is the error path')
            }
        }

    </script>
</html>